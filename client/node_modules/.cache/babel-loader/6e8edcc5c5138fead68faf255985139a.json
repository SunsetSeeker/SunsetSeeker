{"ast":null,"code":"import _objectSpread from\"/Users/gabrielmaldonadopalladini/Desktop/Ironhack/Project3/SunsetSeeker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/Users/gabrielmaldonadopalladini/Desktop/Ironhack/Project3/SunsetSeeker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/Users/gabrielmaldonadopalladini/Desktop/Ironhack/Project3/SunsetSeeker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/gabrielmaldonadopalladini/Desktop/Ironhack/Project3/SunsetSeeker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/gabrielmaldonadopalladini/Desktop/Ironhack/Project3/SunsetSeeker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/gabrielmaldonadopalladini/Desktop/Ironhack/Project3/SunsetSeeker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/gabrielmaldonadopalladini/Desktop/Ironhack/Project3/SunsetSeeker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import*as React from\"react\";import'./AddSpot.css';import{Component}from\"react\";import axios from'axios';// import FileInput from './FileInput'; \nimport{Link}from'react-router-dom';import Pin from\"./Pin\";import{render}from\"react-dom\";import MapGL,{Marker}from\"react-map-gl\";import\"react-map-gl-geocoder/dist/mapbox-gl-geocoder.css\";import ReactMapGL from\"react-map-gl\";var AddSpot=/*#__PURE__*/function(_Component){_inherits(AddSpot,_Component);var _super=_createSuper(AddSpot);function AddSpot(){var _this;_classCallCheck(this,AddSpot);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={title:\"\",description:\"\",file:[],uploadText:\"Choose a photo:\",viewport:{latitude:52,longitude:13,zoom:10,width:500,height:400,coordinates:\"\"},marker:{latitude:52.5196,longitude:13.4069},events:{}};_this.componentDidMount=function(){navigator.geolocation.getCurrentPosition(function(response){_this.setState({viewport:{latitude:response.coords.latitude,longitude:response.coords.longitude,width:480,height:400,zoom:10},marker:{latitude:response.coords.latitude,longitude:response.coords.longitude}});});};_this.onDrop=function(picture){_this.setState({file:_this.state.file.concat(picture)});};_this.handleChange=function(event){var name=event.target.name;var value=event.target.value;_this.setState(_defineProperty({},name,value));};_this.handleFile=function(element){_this.setState({// uploadOn:true, \nuploadText:\"It's uploading..\"});console.log(element);var uploadData=new FormData();console.log(\"SHOW ME THIS\"+element.target);uploadData.append(\"img\",element.target.files[0]);// for (var x=0; x<element.target.file.length; x++) {\n//   uploadData.append(\"img\", element.target.file[x])\n// }\nconsole.log(\"THIS IS HAPPENING\");axios.post(\"/server/list/upload\",uploadData).then(function(response){_this.setState({file:[].concat(_toConsumableArray(_this.state.file),[response.data.secure_url]),// uploadOn: false, \nuploadText:\"Upload successful.\"});}).catch(function(err){return console.log(err);});};_this.handleSubmit=function(event){event.preventDefault();axios.post('/server/list',{title:_this.state.title,description:_this.state.description,file:_this.state.file,latitude:_this.state.marker.latitude,longitude:_this.state.marker.longitude}).then(function(res){console.log(res.data);// this.props.getData();\n_this.props.history.push(\"/spotdetails/\".concat(res.data._id));//added this again in order to check file upload to Mongo\n_this.setState({title:\" \",description:\" \",file:\" \"});//     })\n//     .then((res) => {\n//       console.log(res)\n//       this.setState({\n//         title:\" \", \n//         description:\" \", \n//         file:\" \", \n//       }); \n}).catch(function(err){console.log(err);});};_this._updateViewport=function(viewport){_this.setState({viewport:viewport});};_this._onMarkerDragStart=function(event){_this._logDragEvent(\"onDragStart\",event);};_this._onMarkerDrag=function(event){_this._logDragEvent(\"onDrag\",event);};_this._onMarkerDragEnd=function(event){_this._logDragEvent(\"onDragEnd\",event);_this.setState({marker:{longitude:event.lngLat[0],latitude:event.lngLat[1]}});};return _this;}_createClass(AddSpot,[{key:\"_logDragEvent\",value:function _logDragEvent(name,event){this.setState({events:_objectSpread(_objectSpread({},this.state.events),{},_defineProperty({},name,event.lngLat))});}},{key:\"removeFile\",value:function removeFile(f){this.setState({file:this.state.file.filter(function(x){return x!==f;})});}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,viewport=_this$state.viewport,marker=_this$state.marker;// console.log(this.state.file)\n// console.log(viewport, marker)\nreturn/*#__PURE__*/React.createElement(\"div\",{className:\"addspot-container\"},/*#__PURE__*/React.createElement(Link,{to:\"/list\"},\" \",/*#__PURE__*/React.createElement(\"button\",{className:\"white-button\"},\"Go back to overview\")),/*#__PURE__*/React.createElement(\"h4\",null,\"Add a new sunset location:\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit,encType:\"multipart/form-data\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-container\"},/*#__PURE__*/React.createElement(\"label\",null,\"Name of the place:\"),\" \",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{className:\"add-input\",type:\"text\",id:\"title\",name:\"title\",value:this.state.title,onChange:this.handleChange,required:true})),/*#__PURE__*/React.createElement(\"div\",{className:\"input-container\"},/*#__PURE__*/React.createElement(\"label\",null,\"Tell us more about the place:\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{className:\"add-input\",type:\"text\",id:\"description\",name:\"description\",value:this.state.description,onChange:this.handleChange})),/*#__PURE__*/React.createElement(\"div\",{className:\"map\"},/*#__PURE__*/React.createElement(\"label\",null,\"Choose a spot on the map:\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(ReactMapGL,Object.assign({},this.state.viewport,{mapStyle:\"mapbox://styles/paolagaray/ckd0bdux30v981ilig8zxzd8p\",onViewportChange:function onViewportChange(viewport){return _this2.setState({viewport:viewport});},mapboxApiAccessToken:process.env.REACT_APP_MAPBOX_TOKEN}),/*#__PURE__*/React.createElement(\"span\",{className:\"DragAndDrop MediumTextBold\"}),/*#__PURE__*/React.createElement(Marker,{longitude:marker.longitude,latitude:marker.latitude,offsetTop:-20,offsetLeft:-10,draggable:true,onDragStart:this._onMarkerDragStart,onDrag:this._onMarkerDrag,onDragEnd:this._onMarkerDragEnd},/*#__PURE__*/React.createElement(Pin,{size:20})))),/*#__PURE__*/React.createElement(\"div\",{className:\"input-container\"},this.state.uploadText,this.state.uploadText==\"It's uploading..\"&&/*#__PURE__*/React.createElement(\"div\",{className:\"bouncing-loader\"},/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",null)),/*#__PURE__*/React.createElement(\"div\",{className:\"fileInput\"},/*#__PURE__*/React.createElement(\"input\",{type:\"file\",id:\"photo\",name:\"photo\",\"data-cloudinary-field\":\"img_id\"// onChange={this.handleFile}\n,onChange:function onChange(event){return _this2.handleFile(event);}}),/*#__PURE__*/React.createElement(\"br\",null)),this.state.file.length!==0&&this.state.file.map(function(pic){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"img\",{src:pic,style:{width:\"100px\"}}));})),this.state.uploadText!==\"It's uploading..\"&&/*#__PURE__*/React.createElement(\"button\",{className:\"button\",type:\"submit\",value:\"Add\"},\" Add this spot\")));}}]);return AddSpot;}(Component);export{AddSpot as default};","map":{"version":3,"sources":["/Users/gabrielmaldonadopalladini/Desktop/Ironhack/Project3/SunsetSeeker/client/src/components/AddSpot/AddSpot.js"],"names":["React","Component","axios","Link","Pin","render","MapGL","Marker","ReactMapGL","AddSpot","state","title","description","file","uploadText","viewport","latitude","longitude","zoom","width","height","coordinates","marker","events","componentDidMount","navigator","geolocation","getCurrentPosition","response","setState","coords","onDrop","picture","concat","handleChange","event","name","target","value","handleFile","element","console","log","uploadData","FormData","append","files","post","then","data","secure_url","catch","err","handleSubmit","preventDefault","res","props","history","push","_id","_updateViewport","_onMarkerDragStart","_logDragEvent","_onMarkerDrag","_onMarkerDragEnd","lngLat","f","filter","x","process","env","REACT_APP_MAPBOX_TOKEN","length","map","pic"],"mappings":"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","sourcesContent":["import * as React from \"react\";\nimport './AddSpot.css';\nimport { Component } from \"react\";\nimport axios from 'axios'; \n// import FileInput from './FileInput'; \nimport { Link } from 'react-router-dom';\nimport Pin from \"./Pin\";\nimport { render } from \"react-dom\";\nimport MapGL, { Marker } from \"react-map-gl\";\nimport \"react-map-gl-geocoder/dist/mapbox-gl-geocoder.css\";\nimport ReactMapGL from \"react-map-gl\";\nexport default class AddSpot extends Component {\n  state={\n    title:\"\", \n    description:\"\",\n    file:[], \n    uploadText: \"Choose a photo:\", \n    viewport: {\n      latitude: 52,\n      longitude: 13,\n      zoom: 10,\n      width: 500,\n      height: 400,\n      coordinates:\"\",\n    },\n    marker: {\n      latitude: 52.5196,\n      longitude: 13.4069,\n    },\n    events: {},\n  }; \n  componentDidMount = () => {\n    navigator.geolocation.getCurrentPosition((response) => {\n      this.setState({\n        viewport: {\n          latitude: response.coords.latitude,\n          longitude: response.coords.longitude,\n          width: 480,\n          height: 400,\n          zoom: 10,\n        },\n        marker: {\n          latitude: response.coords.latitude,\n          longitude: response.coords.longitude,\n        },\n      });\n    });\n  };   \nonDrop=(picture)=> {\n    this.setState({\n      file:this.state.file.concat(picture)\n    }); \n  }   \n  handleChange = event => {\n    const name=event.target.name; \n    const value=event.target.value; \n    this.setState({\n      [name]: value\n    });\n  }; \n  handleFile = element => {    \n    this.setState({\n      // uploadOn:true, \n      uploadText:\"It's uploading..\"\n    }); \n    console.log(element);\n    const uploadData=new FormData();\n    console.log(\"SHOW ME THIS\"+element.target) \n    uploadData.append(\"img\", element.target.files[0]); \n    // for (var x=0; x<element.target.file.length; x++) {\n    //   uploadData.append(\"img\", element.target.file[x])\n    // }\n    console.log(\"THIS IS HAPPENING\")\n    axios\n    .post(\"/server/list/upload\", uploadData)\n    .then(response =>{\n      this.setState({\n        file:[...this.state.file,response.data.secure_url], \n        // uploadOn: false, \n        uploadText: \"Upload successful.\"\n      })\n    })\n    .catch(err=> console.log(err))\n  };\n  handleSubmit = event => {\n    event.preventDefault(); \n    axios\n    .post('/server/list', {\n      title: this.state.title, \n      description: this.state.description,\n      file: this.state.file,\n      latitude: this.state.marker.latitude,\n      longitude: this.state.marker.longitude,\n      })\n    .then((res) => {\n      console.log(res.data);\n      // this.props.getData();\n      this.props.history.push(`/spotdetails/${res.data._id}`);   \n      //added this again in order to check file upload to Mongo\n      this.setState({\n        title:\" \", \n        description:\" \", \n        file: \" \", \n      })        \n//     })\n//     .then((res) => {\n//       console.log(res)\n//       this.setState({\n//         title:\" \", \n//         description:\" \", \n//         file:\" \", \n//       }); \n    })\n    .catch(err => {\n      console.log(err); \n    });\n  };\n  _updateViewport = (viewport) => {\n    this.setState({ viewport });\n  };\n  _logDragEvent(name, event) {\n    this.setState({\n      events: {\n        ...this.state.events,\n        [name]: event.lngLat,\n      },\n    });\n  }\n  _onMarkerDragStart = (event) => {\n    this._logDragEvent(\"onDragStart\", event);\n  };\n  _onMarkerDrag = (event) => {\n    this._logDragEvent(\"onDrag\", event);\n  };\n  _onMarkerDragEnd = (event) => {\n    this._logDragEvent(\"onDragEnd\", event);\n    this.setState({\n      marker: {\n        longitude: event.lngLat[0],\n        latitude: event.lngLat[1],\n      },\n    });\n  };\n  removeFile(f) {\n    this.setState({file:this.state.file.filter((x) => x!==f)}); \n  }\n  render(){\n    const { viewport, marker } = this.state;\n    // console.log(this.state.file)\n    // console.log(viewport, marker)\n    return(\n      <div className=\"addspot-container\">\n       <Link to ={`/list`}> <button className=\"white-button\">Go back to overview</button></Link>\n      <h4>Add a new sunset location:</h4>\n      <form \n      onSubmit={this.handleSubmit}\n      encType=\"multipart/form-data\"\n      >\n        <div className=\"input-container\">\n        <label>Name of the place:</label> <br/>\n            <input \n            className=\"add-input\"\n            type=\"text\" \n            id=\"title\"\n            name=\"title\"\n            value={this.state.title}\n            onChange={this.handleChange}\n            required\n            />\n        </div>\n        <div className=\"input-container\">\n        <label>Tell us more about the place:</label><br/>\n            <input\n            className=\"add-input\"\n            type=\"text\"\n            id=\"description\"\n            name=\"description\"\n            value={this.state.description}\n            onChange={this.handleChange}\n            />\n        </div>\n        <div className=\"map\">\n      <label>Choose a spot on the map:</label><br/>\n      <ReactMapGL\n        {...this.state.viewport}\n        mapStyle=\"mapbox://styles/paolagaray/ckd0bdux30v981ilig8zxzd8p\"\n        onViewportChange={(viewport) => this.setState({viewport})}\n        mapboxApiAccessToken={ process.env.REACT_APP_MAPBOX_TOKEN }\n      >\n        <span className=\"DragAndDrop MediumTextBold\">\n            {/* Drag and drop the pin to spot a hidden place */}\n        </span>\n            <Marker\n                longitude={marker.longitude}\n                latitude={marker.latitude}\n                offsetTop={-20}\n                offsetLeft={-10}\n                draggable\n                onDragStart={this._onMarkerDragStart}\n                onDrag={this._onMarkerDrag}\n                onDragEnd={this._onMarkerDragEnd}\n              >\n                <Pin size={20} />\n            </Marker>\n      </ReactMapGL>\n      </div>\n        <div className=\"input-container\">\n              {this.state.uploadText}\n              {this.state.uploadText==\"It's uploading..\" && (\n              <div className=\"bouncing-loader\">\n              <div></div>\n              <div></div>\n              <div></div>\n              </div>              \n              )}\n\n\n            <div className=\"fileInput\">\n              \n              <input \n              \n              type=\"file\" \n              id=\"photo\"\n              name=\"photo\"\n              data-cloudinary-field=\"img_id\"\n              \n              // onChange={this.handleFile}\n              onChange={(event)=> this.handleFile(event)}\n              /><br/>\n              </div>\n\n\n              {/* {this.state.file.map((f) => (\n                <div className=\"filepreview\" onClick={this.removeFile.bind(this, f)}>{f.name}</div>\n              ))} */}\n              {/* showing the pictures when uploaded: */}\n              {this.state.file.length !==0 && this.state.file.map(pic=>{\n                return <>\n                <img src={pic} style={{width: \"100px\"}}></img>\n                </>\n              })}\n          </div>\n          {/* <FileInput handleFile={this.handleFile} /> */}\n              {this.state.uploadText!==\"It's uploading..\" && (\n               <button className=\"button\" type=\"submit\" value=\"Add\"> Add this spot</button> \n              )}\n      </form>\n      \n      \n      </div>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}